# REST API для блога пользователей

Проект представляет собой блог пользователей с возможностью публикации постов и подписываться на других пользователей.
Написан на фреймворке FastAPI с использованием PostgreSQL в качестве БД.
При публикации постов в личном блоге ленты подписчиков автоматически обновляются через Celery и RabbitMQ.
Раз в сутки пользователям выполняется рассылка 5 последних постов из их ленты новостей.

## Оглавление
1. [Техническое задание](#ТЗ)
2. [Инструменты](#Инструменты)
3. [Сборка](#Сборка)
   1. [Production](#Prod)

## ТЗ
* Имеется база пользователей (добавляются через swagger, без регистрации);
* У каждого пользователя при создании создается персональный блог. Новые создавать он не может;
* Пост в блоге — элементарная запись с заголовком, текстом (140 символов) и временем создания. Заголовок обязательное поле;
* Пользователь может подписываться / отписываться на блоги других пользователей (любое количество);
* У пользователя есть персональная лента новостей (не более ~500 постов), в которой выводятся посты из блогов, на которые он подписан, в порядке добавления постов. Пагинация по 10 постов;
* Пользователь может помечать посты в ленте прочитанными;
* При удалении / добавлении поста, лента тоже меняется;
* Раз в сутки на почту прилетает подборка из 5 последних постов ленты (можно в консоль);
* В среднем пользователь подписан на 100 человек, которые постят по 2-3 раза в день;
* Предполагаемое кол-во пользователей в системе около 1 млн.

## Инструменты
* **Python** (3.11);
* **FastAPI** (asynchronous Web Framework);
* **PostgreSQL** (database);
* **SQLAlchemy** (working with database from Python);
* **Alembic** (database migrations made easy);
* **Pydantic** (data verification);
* **Celery** (updating news feeds users and sending out news);
* **RabbitMQ** (message broker for celery);
* **Nginx** (web server);
* **Docker Compose** (assembly and deployment).

## Сборка

1. Скачиваем содержимое репозитория в отдельную папку:
    ```
    git clone https://github.com/FreemaHG/blog-api.git
    ```
   
### Prod

2. Переименовываем файл "**.env.prod.template**" в "**.env**".


3. Собираем и запускаем приложение:
   ```
   docker-compose up -d
   ```

   После сборки и запуска контейнеров ознакомиться с документацией API можно по адресу:
    ```
    http://127.0.0.1/docs/
    ```

4. Остановка и удаление приложения:
   ```
   docker-compose down
   ```